# Values for monarch-api (monarch-money-mcp)
# Using existing monarch-money-mcp image

image:
  repository: registry.home.mcztest.com/monarch-money-mcp
  tag: latest
  pullPolicy: Always

service:
  port: 80
  targetPort: 8000

ingress:
  enabled: true
  host: monarch-api.home.mcztest.com

mcp:
  enabled: true
  transport: streamable-http

# MCP apps typically use TCP health checks
healthCheck:
  enabled: true
  http:
    enabled: false
  tcp:
    enabled: true
    port: http

# External PostgreSQL
postgres:
  enabled: true
  external:
    enabled: true
    host: postgres.gitea.svc.cluster.local
    port: 5432
    database: monarch
    user: "" # Set via secret
    existingSecret: monarch-db-credentials
    passwordKey: password

# Additional env for database user from secret
env:
  - name: DATABASE_USER
    valueFrom:
      secretKeyRef:
        name: monarch-db-credentials
        key: username

resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 512Mi
